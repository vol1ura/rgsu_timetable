## Расписание преподавателя РГСУ

Скрипт парсит сайт rgsu.net, генерируя файл .csv с данными из расписания заданного преподавателя. Этот файл импортируется в Google календарь. Появляются события и напоминания о занятиях с названиями групп и аудиториями. Пользователи телефонов с Android получают календарь в своём устройстве.
![Google calendar](/pics/example2.png)

### Как пользоваться:
1. Должен быть установлен Python версии 3.4 или выше 
2. Скорее всего, потребуется доустановить модули `python3 -m pip install beatifulsoup,lxml,csv,requests`
2. Скачиваем `crawler.py` в какую-либо директорию
3. Прописать ФИО преподавателя, начальную и конечную даты в файле настроек `settings.txt`
4. Запуск скрипта командой `python3 crawler.py` в директории с скриптом
5. Появится файл `calendar_xx.xx.csv`
6. В Google каледнаре перейти в настройки (шестерёнка) -> Импорт и экспорт -> Выбрать csv файл и нужный календарь (см. скриншоты) -> Импорт
![Pic1](/pics/example0.png)

### Файл настроек
В директории скрипта должен лежать файл с настройками `settings.txt` в кодировке UTF-8. Файл состоит из трёх строк - ФИО преподавателя **полностью** (как на сайте rgsu.net), начальная дата и конечная дата генерации расписания: 

> Фамилия Имя Отчество<br />
> dd.mm.yyyy<br />
> dd.mm.yyyy<br />

### Что добавлено:
Версия 1.3
* Для поточных занятий (несколько групп на одной паре) создаётся только одно событие в календаре. Объединение не происходит в случае не совпадения дисциплины или типа занятия (это ошибка в расписании на сайте)
* В диагностическом сообщении указывается чётность текущей недели с учём особенности отображения на сайте по воскресеньям
* Если что-то не так с файлом настроек, будет выводиться диагностика
* Вычисляется суммарная нагрузка преподавателя в часах в диапазоне, а также среднее количество часов в неделю для диапазона 

Версия 1.2
* ФИО и диапазон дат для генерации расписания считываются из файла настроек `settings.txt`
* Выделил диагностические сообщения. Однако они пока никак не используются и ни на что не влияют

Версия 1.11
* Расчёт расписания в этой версии происходит начиная с очередного понедельника
* Устранён небольшой баг при определении чётности недели

Версия 1.1
* Протестировал скрипт на расписаниях нескольких случайных преподавателей
* Устранены мелкие баги
* Изменён код генерации сокращённого названия дисциплины
* Добавлены скриншоты, демонстрирующие работу скрипта

Версия 1.0
* Версия протестирована пока только на моём расписании
* Ограничение: ФИО преподавателя и даты генерации записей в расписании прописываются непосредственно в питоновском скрипте
* Ограничение: даты занятий должны быть прописаны в поле Дисциплина. Скрипт пока не обрабатывает дисциплины, повторяющиеся весь семестр
* Ограничение: для поточных занятий скрипт генерит несколько событий, т.е. для каждой группы создаётся отдельное событие

### ToDo:
- [ ] Учесть случай дисциплины не по конкретным дням (весь семестр по чётным или нечётным неделям)
- [x] Объединить поточные занятия в одно событие
- [x] Добавить возможность передачи ФИО преподавателя через файл настроек
- [x] Добавить возможность задавать диапазон расчёта расписания через файл настроек
